<!doctype html>
<html>

<head>
  <title>ttVision | Remote</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css" >
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic" >
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.3.0/milligram.min.css" >
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" >
  <link rel="shortcut icon" href="/favicon.ico " >
  <style>
    #confirm {
      display: block;
      width: 100%;
      font-size: 1.5rem;
      height: 4.5rem;
      line-height: 4.5rem;
      padding: 0 2rem;
    }
    #confirm_label {
      color: red;
    }
  </style>
  <script type="text/javascript">
    function setUsername() {
      var username = document.getElementById("username").value;
      localStorage.setItem('username', username);
      console.log('username ' + username);
    }

    window.onload = function() {
      //https://css-tricks.com/snippets/javascript/get-url-variables/
      var query = window.location.search.substring(1);
      var vars = query.split("&");
      for (var i=0;i<vars.length;i++) {
        var pair = vars[i].split("=");
        if(pair[0] == "auth") {
          document.getElementById("confirm_label").innerHTML = "Connection failed. Try again.";
        }
      }
    }
  </script>
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="column">
        <h1>ttVision</h1>
      </div>
    </div>

    <div class="row">
      <div class="column">
        <form method="post" action="/mobile" onsubmit="setUsername()">
          <fieldset>
            <label for="username">Twitch Username</label>
            <input type="text" id="username" placeholder="Your Twitch Username">
            <label for="room">Room Code</label>
            <input type="text" id="mobile_key" placeholder="4 character mobile key">
            <label for="confirm" id="confirm_label"></label>
            <input id="confirm" class="button-primary" type="submit" value="Connect" \>
          </fieldset>
        </form>
      </div>
    </div>

  </div>
</body>

</html>
